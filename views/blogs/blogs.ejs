<%- include('../includes/head.ejs') %>

</head>
  
  <body>
    <%- include('../includes/navigation.ejs') %>
    <main class="home-page">
        <div class="title">
            <h1>Hi, I'm Doru.</h1>
            <p>Web developer</p>
        </div>
        <img src="/images/blog.jpg" alt="Window, winter,laptop" width="550" height="300" />
        <div class="posts">
            <% if(posts) { %>
                <% posts.map(post => { %>
                    <a  href="/view-post/<%= post._id %>">
                        <div class="post">
                                <% if(isAuthenticated) { %>
                                <div class="likes">
                                    <input type="hidden" value="<%= post._id %>" name="postId" /> 
                                    <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
                                    <button class="fa" type="button"  onclick="event.preventDefault(); updateLikesId(this)"><%= post.likesId.length %> &#xf087;</button>
                                </div>
                                <% } %>
                                <ul>
                                    <li class="post-details">
                                        <h2><%= post.title %></h2>
                                        <div class="date">
                                            <p><%= post.createdAt.toLocaleDateString('en-US') %></p>
                                        </div>
                                    </li>
                                </ul>
                                
                            </div>
                        </a>
                <%})%>
                    <% }else { %>
                        <div>No posts yet</div>
                        <%}%>
        </div>             
    </main>
    <%- include('../includes/end.ejs') %>
    <script src="/js/main.js"></script>